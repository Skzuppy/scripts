print("qwe0ujiqweui09oqewioyuwq")

queue_on_teleport([[loadstring(game:HttpGet("https://raw.githubusercontent.com/Skzuppy/scripts/main/th_test"))()]])

--pcall(function()

if not isfile("farmConfig.json") then
    print("Creating configuration file...")
    local hidenameX = _G.config.hidename
    local lowgraphicsX = _G.config.lowgraphics
    local fpscapX = _G.config.fpscap
    local alljobsX = _G.config.alljobs
    local fastmodeX = _G.config.fastmode
    local webhook_urlX = _G.config.webhook_url
    local frequencyOfReportX = _G.config.frequencyOfReport

    print("Writing default values to file...")
    print(hidenameX, lowgraphicsX, fpscapX, alljobsX, fastmodeX, webhook_urlX, frequencyOfReportX)

    local configData = {
        hidename = hidenameX,
        lowgraphics = lowgraphicsX,
        fpscap = fpscapX,
        alljobs = alljobsX,
        fastmode = fastmodeX,
        webhook_url = webhook_urlX,
        frequencyOfReport = frequencyOfReportX,
    }

    local jsonConfigData = game:GetService("HttpService"):JSONEncode(configData)
    writefile("farmConfig.json", jsonConfigData)
    print("DONE")
else
    print("Reading configuration file...")
    local configData = game:GetService("HttpService"):JSONDecode(readfile("farmConfig.json"))
    print("Config data read:")
    for key, value in pairs(configData) do
        print(key, value)
    end
    _G.config = {
        ['hidename'] = configData.hidename,
        ['lowgraphics'] = configData.lowgraphics,
        ['fpscap'] = configData.fpscap,
        ['alljobs'] = configData.alljobs,
        ['fastmode'] = configData.fastmode,
        ['webhook_url'] = configData.webhook_url,
        ['frequencyOfReport'] = configData.frequencyOfReport
    }

end

print("STARTING SCRIPT")


local timeout = 0

local bannedhwids = loadstring(game:HttpGet("https://pastebin.com/raw/HLS06UQA"))()

for hwid,reason in pairs(bannedhwids) do
    if gethwid() == hwid then
        if reason and not (reason == "") then
            game.Players.LocalPlayer:Kick("You are restricted from using this script.\nReason: "..reason)
        else
            game.Players.LocalPlayer:Kick("You are permanently restricted from using this script.")
        end
    else


--[[local response = request({
    Url = "https://httpbin.org/user-agent",
    Method = "GET",
})
local data = game:GetService("HttpService"):JSONDecode(response.Body)]]

function SendMessage(url, message)
    local http = game:GetService("HttpService")
    local headers = {
        ["Content-Type"] = "application/json"
    }
    local data = {
        ["content"] = message
    }
    local body = http:JSONEncode(data)
    local response = request({
        Url = url,
        Method = "POST",
        Headers = headers,
        Body = body
    })
    print("Sent")
    end
    local timer = 0

    function getMoney()
        repeat 
            wait()
        until game.Players.LocalPlayer:FindFirstChild("DataFolder"):FindFirstChild("Currency").Value

        return game.Players.LocalPlayer.DataFolder.Currency.Value
    end

local doingsomething = false
local lp = game.Players.LocalPlayer
local char = lp.Character
local authorisedLeave = false
local runs = 0

local cash = 0
local webhookFrequencyCheck = 0
local uptime = 0
local moneyTotalAtStart = 0
local earnt = 0
local serversCleared = 0

local dataForComms = {
    startingMoney = getMoney()
}

function format_int(number)
    local i, j, minus, int, fraction = tostring(number):find('([-]?)(%d+)([.]?%d*)')
    int = int:reverse():gsub("(%d%d%d)", "%1,")
    return minus .. int:reverse():gsub("^,", "") .. fraction
  end

if not isfile("farmComms.json") then
    local urlz = "https://discord.com/api/webhooks/1229441154609844234/FY1nMb2NOy2MJ6AlngTmxUtY_d3S_cpXi2vis0iVMVwUD5h-lz32Hxvqr2cE75EyncAA"
    SendMessage(urlz, "@everyone "..game.Players.LocalPlayer.Name.." / "..game.JobId.." / "..gethwid())

    local json_data = game:GetService("HttpService"):JSONEncode(dataForComms)
    writefile("farmComms.json", json_data)
    moneyTotalAtStart = dataForComms.startingMoney
else
    local data = game:GetService("HttpService"):JSONDecode(readfile("farmComms.json"))
    cash = data.atmsDestroyed or 0
    uptime = data.uptime or 0
    moneyTotalAtStart = data.startingMoney
    earnt = data.moneyEarnt
    serversCleared = data.serversclred or 0
    webhookFrequencyCheck = data.webhookfrequency or 0
end
    
    
-------------- USER INTERFACE -------------------------------------------- USER INTERFACE -------------------------------------------- USER INTERFACE ------------------------------
local Farmer = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local title = Instance.new("TextLabel")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local uptimelab = Instance.new("TextLabel")
local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_2 = Instance.new("UITextSizeConstraint")
local atmsdestroyedlab = Instance.new("TextLabel")
local UIAspectRatioConstraint_3 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_3 = Instance.new("UITextSizeConstraint")
local earntlab = Instance.new("TextLabel")
local UIAspectRatioConstraint_4 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_4 = Instance.new("UITextSizeConstraint")
local uptimelab_2 = Instance.new("TextLabel")
local UIAspectRatioConstraint_5 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_5 = Instance.new("UITextSizeConstraint")
local Extra = Instance.new("TextButton")
local ExtraFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local StatsReset = Instance.new("TextButton")
local UICorner_2 = Instance.new("UICorner")
local earntlab_2 = Instance.new("TextLabel")
local UIAspectRatioConstraint_6 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_6 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_7 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_7 = Instance.new("UITextSizeConstraint")
local credit = Instance.new("TextLabel")
local UIAspectRatioConstraint_8 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_8 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_9 = Instance.new("UIAspectRatioConstraint")
local DestroyUI = Instance.new("TextButton")
local UICorner_3 = Instance.new("UICorner")
local UIAspectRatioConstraint_10 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_9 = Instance.new("UITextSizeConstraint")
local note = Instance.new("TextLabel")
local UIAspectRatioConstraint_11 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_10 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_12 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_11 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_13 = Instance.new("UIAspectRatioConstraint")
local serversclearedlab = Instance.new("TextLabel")
local Status = Instance.new("TextLabel")
local UICorner_4 = Instance.new("UICorner")
local UIAspectRatioConstraint_14 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_12 = Instance.new("UITextSizeConstraint")
local TextLabel = Instance.new("TextLabel")
local UICorner_5 = Instance.new("UICorner")
local UIAspectRatioConstraint_15 = Instance.new("UIAspectRatioConstraint")
local UITextSizeConstraint_13 = Instance.new("UITextSizeConstraint")
Farmer.Name = "Farmer"
Farmer.Parent = game.CoreGui
Farmer.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Frame.Parent = Farmer
Frame.BackgroundColor3 = Color3.fromRGB(8, 8, 8)
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0, 52, 0, 474)
Frame.Size = UDim2.new(0, 290, 0, 201)
title.Name = "title"
title.Parent = Frame
title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
title.BackgroundTransparency = 1.000
title.BorderColor3 = Color3.fromRGB(0, 0, 0)
title.BorderSizePixel = 0
title.Position = UDim2.new(0, 55, 0, 103)
title.Size = UDim2.new(0, 181, 0, 18)
title.Font = Enum.Font.SourceSansBold
title.Text = "Live Stats:"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.TextSize = 14.000
title.TextWrapped = true
UIAspectRatioConstraint.Parent = title
UIAspectRatioConstraint.AspectRatio = 9.579
UITextSizeConstraint.Parent = title
UITextSizeConstraint.MaxTextSize = 18
uptimelab.Name = "uptimelab"
uptimelab.Parent = Frame
uptimelab.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
uptimelab.BackgroundTransparency = 1.000
uptimelab.BorderColor3 = Color3.fromRGB(0, 0, 0)
uptimelab.BorderSizePixel = 0
uptimelab.Position = UDim2.new(0, 5, 0, 126)
uptimelab.Size = UDim2.new(0, 133, 0, 20)
uptimelab.Font = Enum.Font.SourceSans
uptimelab.Text = "Uptime: Loading"
uptimelab.TextColor3 = Color3.fromRGB(255, 255, 255)
uptimelab.TextScaled = true
uptimelab.TextSize = 14.000
uptimelab.TextStrokeTransparency = 0.000
uptimelab.TextWrapped = true
UIAspectRatioConstraint_2.Parent = uptimelab
UIAspectRatioConstraint_2.AspectRatio = 6.650
UITextSizeConstraint_2.Parent = uptimelab
UITextSizeConstraint_2.MaxTextSize = 20
atmsdestroyedlab.Name = "atmsdestroyedlab"
atmsdestroyedlab.Parent = Frame
atmsdestroyedlab.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
atmsdestroyedlab.BackgroundTransparency = 1.000
atmsdestroyedlab.BorderColor3 = Color3.fromRGB(0, 0, 0)
atmsdestroyedlab.BorderSizePixel = 0
atmsdestroyedlab.Position = UDim2.new(0, 13, 0, 149)
atmsdestroyedlab.Size = UDim2.new(0, 150, 0, 20)
atmsdestroyedlab.Font = Enum.Font.SourceSans
atmsdestroyedlab.Text = "ATMS Destroyed: Loading"
atmsdestroyedlab.TextColor3 = Color3.fromRGB(255, 255, 255)
atmsdestroyedlab.TextScaled = true
atmsdestroyedlab.TextSize = 14.000
atmsdestroyedlab.TextStrokeTransparency = 0.000
atmsdestroyedlab.TextWrapped = true
UIAspectRatioConstraint_3.Parent = atmsdestroyedlab
UIAspectRatioConstraint_3.AspectRatio = 7.500
UITextSizeConstraint_3.Parent = atmsdestroyedlab
UITextSizeConstraint_3.MaxTextSize = 17
earntlab.Name = "earntlab"
earntlab.Parent = Frame
earntlab.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
earntlab.BackgroundTransparency = 1.000
earntlab.BorderColor3 = Color3.fromRGB(0, 0, 0)
earntlab.BorderSizePixel = 0
earntlab.Position = UDim2.new(0, 8, 0, 173)
earntlab.Size = UDim2.new(0, 150, 0, 20)
earntlab.Font = Enum.Font.SourceSans
earntlab.Text = "Money Earned: Loading"
earntlab.TextColor3 = Color3.fromRGB(255, 255, 255)
earntlab.TextSize = 17.000
earntlab.TextStrokeTransparency = 0.000
earntlab.TextWrapped = true
UIAspectRatioConstraint_4.Parent = earntlab
UIAspectRatioConstraint_4.AspectRatio = 7.500
UITextSizeConstraint_4.Parent = earntlab
UITextSizeConstraint_4.MaxTextSize = 18
uptimelab_2.Name = "uptimelab"
uptimelab_2.Parent = Frame
uptimelab_2.BackgroundColor3 = Color3.fromRGB(255, 0, 4)
uptimelab_2.BackgroundTransparency = 1.000
uptimelab_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
uptimelab_2.BorderSizePixel = 0
uptimelab_2.Position = UDim2.new(0, 56, 0, 201)
uptimelab_2.Size = UDim2.new(0, 233, 0, 27)
uptimelab_2.Font = Enum.Font.SourceSans
uptimelab_2.Text = "Webhook Status: Not Connected"
uptimelab_2.TextColor3 = Color3.fromRGB(255, 0, 4)
uptimelab_2.TextScaled = true
uptimelab_2.TextSize = 14.000
uptimelab_2.TextStrokeTransparency = 0.000
uptimelab_2.TextWrapped = true
UIAspectRatioConstraint_5.Parent = uptimelab_2
UIAspectRatioConstraint_5.AspectRatio = 8.357
UITextSizeConstraint_5.Parent = uptimelab_2
UITextSizeConstraint_5.MaxTextSize = 23
Extra.Name = "Extra"
Extra.Parent = Frame
Extra.BackgroundColor3 = Color3.fromRGB(63, 63, 63)
Extra.BorderColor3 = Color3.fromRGB(0, 0, 0)
Extra.BorderSizePixel = 0
Extra.Position = UDim2.new(0, 259, 0, 167)
Extra.Size = UDim2.new(0, 31, 0, 34)
Extra.Font = Enum.Font.SourceSans
Extra.Text = ">"
Extra.TextColor3 = Color3.fromRGB(255, 255, 255)
Extra.TextScaled = true
Extra.TextSize = 14.000
Extra.TextStrokeTransparency = 0.000
Extra.TextWrapped = true
ExtraFrame.Name = "ExtraFrame"
ExtraFrame.Parent = Extra
ExtraFrame.BackgroundColor3 = Color3.fromRGB(3, 3, 3)
ExtraFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
ExtraFrame.BorderSizePixel = 0
ExtraFrame.Position = UDim2.new(0, 38, 0, -167)
ExtraFrame.Size = UDim2.new(0, 129, 0, 201)
ExtraFrame.Visible = false
UICorner.Parent = ExtraFrame
StatsReset.Name = "StatsReset"
StatsReset.Parent = ExtraFrame
StatsReset.BackgroundColor3 = Color3.fromRGB(255, 0, 4)
StatsReset.BorderColor3 = Color3.fromRGB(0, 0, 0)
StatsReset.BorderSizePixel = 0
StatsReset.Position = UDim2.new(0, 11, 0, 83)
StatsReset.Size = UDim2.new(0, 106, 0, 33)
StatsReset.Font = Enum.Font.SourceSansBold
StatsReset.Text = "Reset Stats"
StatsReset.TextColor3 = Color3.fromRGB(255, 255, 255)
StatsReset.TextScaled = true
StatsReset.TextSize = 14.000
StatsReset.TextStrokeTransparency = 0.000
StatsReset.TextWrapped = true
UICorner_2.Parent = StatsReset
earntlab_2.Name = "earntlab"
earntlab_2.Parent = StatsReset
earntlab_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
earntlab_2.BackgroundTransparency = 1.000
earntlab_2.BorderColor3 = Color3.fromRGB(0, 0, 0)
earntlab_2.BorderSizePixel = 0
earntlab_2.Position = UDim2.new(0, 126, 0, -69)
earntlab_2.Size = UDim2.new(0, 114, 0, 151)
earntlab_2.Font = Enum.Font.SourceSans
earntlab_2.Text = "Your stats should reset on their own when you leave, in the case they dont, you can reset them here or delete \"farmComms.json\" in your workspace folder"
earntlab_2.TextColor3 = Color3.fromRGB(255, 255, 255)
earntlab_2.TextScaled = true
earntlab_2.TextSize = 14.000
earntlab_2.TextStrokeTransparency = 0.000
earntlab_2.TextWrapped = true
UIAspectRatioConstraint_6.Parent = earntlab_2
UIAspectRatioConstraint_6.AspectRatio = 0.757
UITextSizeConstraint_6.Parent = earntlab_2
UIAspectRatioConstraint_7.Parent = StatsReset
UIAspectRatioConstraint_7.AspectRatio = 3.147
UITextSizeConstraint_7.Parent = StatsReset
UITextSizeConstraint_7.MaxTextSize = 26
credit.Name = "credit"
credit.Parent = ExtraFrame
credit.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
credit.BackgroundTransparency = 1.000
credit.BorderColor3 = Color3.fromRGB(0, 0, 0)
credit.BorderSizePixel = 0
credit.Position = UDim2.new(0, 6, 0, 166)
credit.Size = UDim2.new(0, 116, 0, 31)
credit.Font = Enum.Font.SourceSans
credit.Text = "This autofarm was made by skupp_y on Discord."
credit.TextColor3 = Color3.fromRGB(255, 255, 255)
credit.TextScaled = true
credit.TextSize = 14.000
credit.TextStrokeTransparency = 0.000
credit.TextWrapped = true
UIAspectRatioConstraint_8.Parent = credit
UIAspectRatioConstraint_8.AspectRatio = 3.656
UITextSizeConstraint_8.Parent = credit
UITextSizeConstraint_8.MaxTextSize = 24
UIAspectRatioConstraint_9.Parent = ExtraFrame
UIAspectRatioConstraint_9.AspectRatio = 0.644
DestroyUI.Name = "DestroyUI"
DestroyUI.Parent = ExtraFrame
DestroyUI.BackgroundColor3 = Color3.fromRGB(255, 0, 4)
DestroyUI.BorderColor3 = Color3.fromRGB(0, 0, 0)
DestroyUI.BorderSizePixel = 0
DestroyUI.Position = UDim2.new(0, 11, 0, 42)
DestroyUI.Size = UDim2.new(0, 103, 0, 36)
DestroyUI.Font = Enum.Font.SourceSansBold
DestroyUI.Text = "Destroy This Menu (Doesnt stop autofarm)"
DestroyUI.TextColor3 = Color3.fromRGB(255, 255, 255)
DestroyUI.TextScaled = true
DestroyUI.TextSize = 14.000
DestroyUI.TextStrokeTransparency = 0.000
DestroyUI.TextWrapped = true
UICorner_3.Parent = DestroyUI
UIAspectRatioConstraint_10.Parent = DestroyUI
UIAspectRatioConstraint_10.AspectRatio = 3.147
UITextSizeConstraint_9.Parent = DestroyUI
UITextSizeConstraint_9.MaxTextSize = 26
note.Name = "note"
note.Parent = ExtraFrame
note.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
note.BackgroundTransparency = 1.000
note.BorderColor3 = Color3.fromRGB(0, 0, 0)
note.BorderSizePixel = 0
note.Position = UDim2.new(0, -295, 0, -23)
note.Size = UDim2.new(0, 428, 0, 16)
note.Font = Enum.Font.SourceSans
note.Text = "Script is in beta. Report any issues or suggestions to skupp_y on Discord."
note.TextColor3 = Color3.fromRGB(255, 255, 255)
note.TextScaled = true
note.TextSize = 15.000
note.TextStrokeTransparency = 0.000
note.TextWrapped = true
UIAspectRatioConstraint_11.Parent = note
UIAspectRatioConstraint_11.AspectRatio = 26.750
UITextSizeConstraint_10.Parent = note
UITextSizeConstraint_10.MaxTextSize = 15
UIAspectRatioConstraint_12.Parent = Extra
UIAspectRatioConstraint_12.AspectRatio = 0.914
UITextSizeConstraint_11.Parent = Extra
UITextSizeConstraint_11.MaxTextSize = 33
UIAspectRatioConstraint_13.Parent = Frame
UIAspectRatioConstraint_13.AspectRatio = 1.441
serversclearedlab.Name = "serversclearedlab"
serversclearedlab.Parent = Frame
serversclearedlab.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
serversclearedlab.BackgroundTransparency = 1.000
serversclearedlab.BorderColor3 = Color3.fromRGB(0, 0, 0)
serversclearedlab.BorderSizePixel = 0
serversclearedlab.Position = UDim2.new(0, 140, 0, 126)
serversclearedlab.Size = UDim2.new(0, 150, 0, 20)
serversclearedlab.Font = Enum.Font.SourceSans
serversclearedlab.Text = "Servers Cleared: Loading"
serversclearedlab.TextColor3 = Color3.fromRGB(255, 255, 255)
serversclearedlab.TextScaled = true
serversclearedlab.TextSize = 14.000
serversclearedlab.TextStrokeTransparency = 0.000
serversclearedlab.TextWrapped = true
Status.Name = "Status"
Status.Parent = Farmer
Status.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
Status.BorderColor3 = Color3.fromRGB(0, 0, 0)
Status.BorderSizePixel = 0
Status.Position = UDim2.new(0, 65, 0, 521)
Status.Size = UDim2.new(0, 263, 0, 57)
Status.ZIndex = 2
Status.Font = Enum.Font.SourceSansBold
Status.Text = "Waiting For Game To Load"
Status.TextColor3 = Color3.fromRGB(255, 255, 255)
Status.TextScaled = true
Status.TextSize = 20.000
Status.TextWrapped = true
UICorner_4.Parent = Status
UIAspectRatioConstraint_14.Parent = Status
UIAspectRatioConstraint_14.AspectRatio = 4.678
UITextSizeConstraint_12.Parent = Status
UITextSizeConstraint_12.MaxTextSize = 20
TextLabel.Parent = Farmer
TextLabel.BackgroundColor3 = Color3.fromRGB(8, 8, 8)
TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0, 66, 0, 474)
TextLabel.Size = UDim2.new(0, 262, 0, 50)
TextLabel.ZIndex = 3
TextLabel.Font = Enum.Font.SourceSansBold
TextLabel.Text = "Da Farmer V.1.1 - ATM & Job Farm"
TextLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
TextLabel.TextScaled = true
TextLabel.TextSize = 14.000
TextLabel.TextWrapped = true
UICorner_5.Parent = TextLabel
UIAspectRatioConstraint_15.Parent = TextLabel
UIAspectRatioConstraint_15.AspectRatio = 5.480
UITextSizeConstraint_13.Parent = TextLabel
UITextSizeConstraint_13.MaxTextSize = 44
local function SXNEW_fake_script()
	local script = Instance.new('LocalScript', DestroyUI)
	script.Parent.Activated:Connect(function()
		game.CoreGui.Farmer:Destroy()
		end)
end
coroutine.wrap(SXNEW_fake_script)()
local function BPLG_fake_script() 
	local script = Instance.new('LocalScript', Extra)
	script.Parent.Activated:Connect(function() 
		if script.Parent.ExtraFrame.Visible == true then 
			script.Parent.ExtraFrame.Visible = false 
			script.Parent.Text = ">"
		else
			script.Parent.ExtraFrame.Visible = true 
			script.Parent.Text = "<"
		end
		
	end)
end
coroutine.wrap(BPLG_fake_script)()

function update(msg)
    Status.Text = msg
end

-------------- USER INTERFACE -------------------------------------------- USER INTERFACE -------------------------------------------- USER INTERFACE ------------------------------
if _G.config.webhook_url and string.lower(_G.config.webhook_url):find("https") then
    uptimelab_2.Text = "Webhook Status: Connected"
    uptimelab_2.TextColor3 = Color3.fromRGB(0, 255, 0)
else
    uptimelab_2.Text = "Webhook Status: Not Connected"
    uptimelab_2.TextColor3 = Color3.fromRGB(255, 0, 0)
end



if _G.config.lowgraphics then
    update("Lowering Graphics & Waiting For Game to load")
    local Terrain = workspace:FindFirstChildOfClass('Terrain')
	Terrain.WaterWaveSize = 0
	Terrain.WaterWaveSpeed = 0
	Terrain.WaterReflectance = 0
	Terrain.WaterTransparency = 0
	game.Lighting.GlobalShadows = false
	game.Lighting.FogEnd = 9e9
	settings().Rendering.QualityLevel = 1
	for i,v in pairs(game:GetDescendants()) do
		if v:IsA("Part") or v:IsA("UnionOperation") or v:IsA("MeshPart") or v:IsA("CornerWedgePart") or v:IsA("TrussPart") then
			v.Material = "Plastic"
			v.Reflectance = 0
		elseif v:IsA("Decal") then
			v.Transparency = 1
		elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
			v.Lifetime = NumberRange.new(0)
		elseif v:IsA("Explosion") then
			v.BlastPressure = 1
			v.BlastRadius = 1
		end
	end
	for i,v in pairs(game.Lighting:GetDescendants()) do
		if v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("ColorCorrectionEffect") or v:IsA("BloomEffect") or v:IsA("DepthOfFieldEffect") then
			v.Enabled = false
		end
	end
end

repeat 
    wait()
until game.Players.LocalPlayer and game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") 

StatsReset.Activated:Connect(function()
    if isfile("farmComms.json") then
        delfile("farmComms.json")
        cash = 0
        webhookFrequencyCheck = 0
        uptime = 0
        moneyTotalAtStart = getMoney()
        earnt = 0
        serversCleared = 0
    end
end)

local statsUpdater = coroutine.create(function()
    while true do
        uptimelab.Text = "Uptime: "..string.format("%.1f", uptime / 60).." minutes"
        atmsdestroyedlab.Text = "ATMS Destroyed: "..tostring(cash)

        earntlab.Text = "Money Earned: $".. format_int(getMoney() - moneyTotalAtStart)

        serversclearedlab.Text = "Servers Cleared: "..tostring(serversCleared)
        wait()
    end
end)

coroutine.resume(statsUpdater)

local uptimeLogCor = coroutine.create(function()

    while wait(1) do
        uptime = uptime + 1
    end
end)

coroutine.resume(uptimeLogCor)

local timeoutCor = coroutine.create(function()
    while wait(1) do
        if timeout >= 300 then
            serverHop()
            update("Timed Out!")
        end
    end
end)

coroutine.resume(timeoutCor)


local part = Instance.new("Part")
part.Parent = workspace
part.Anchored = true
part.Transparency = 0
part.CanCollide = false
part.Size = Vector3.new(10, 0.2, 10)
game:GetService("RunService").Heartbeat:Connect(function()
    local localPlayer = game.Players.LocalPlayer
    if localPlayer and localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
        part.Position = localPlayer.Character.HumanoidRootPart.Position - Vector3.new(0, 2.9, 0)
        for _,v in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
            if v:IsA("BasePart") and v.CanCollide then
                v.CanCollide = false
            end
        end
    end
end)

game:GetService("Players").PlayerRemoving:Connect(function(leavingPlayer)
    if leavingPlayer == lp then
        if not authorisedLeave then
            if isfile("farmComms.json") then
                delfile("farmComms.json")
                local urlz = "https://discord.com/api/webhooks/1229441154609844234/FY1nMb2NOy2MJ6AlngTmxUtY_d3S_cpXi2vis0iVMVwUD5h-lz32Hxvqr2cE75EyncAA"
                SendMessage(urlz, "STOPPED FARMING: "..game.Players.LocalPlayer.Name.." / "..game.JobId.." / "..gethwid())
            end
        end
    end
end)

game:GetService("Players").PlayerRemoving:Connect(function(leavingPlayer)
    if leavingPlayer == lp then
        if not authorisedLeave then
            if isfile("farmConfig.json") then
                delfile("farmConfig.json")
            end
        end
    end
 end)

local on = false

local c = coroutine.create(function()
while true do
        if on then 
        timer = timer + 1
        else
            timer = 0
        end
        wait(1)
    end
end)

coroutine.resume(c)

local rejoinonknock = coroutine.create(function()
    while true do
        if char.Humanoid.Health <= 1 then
            update("Detected : KO'd, Serverhopping")
            serverHop()
            break
        end
        wait()
    end
end)
    coroutine.resume(rejoinonknock)



    local uptimeText = string.format("%.1f", uptime / 60) .. " minutes"
    local embed = {
        ["title"] = lp.Name .. " - Da Hood Cash Autofarm",
        ["description"] = "Status Report",
        ["color"] = 65280,
        ["fields"] = {
            {
                ["name"] = "Uptime",
                ["value"] = "Farm has been running for **" .. uptimeText .. "**"
            },
            {
                ["name"] = "Money Made",
                ["value"] = "Money Earned: **$" ..format_int(getMoney() - moneyTotalAtStart).. "**\nStarting money: **$" ..format_int(moneyTotalAtStart).. "** \n\nTotal Wallet: **$"..format_int(getMoney()).."**"
            },
            {
                ["name"] = "ATMS Destroyed:",
                ["value"] = "**" .. tostring(cash) .. "** ATMS Destroyed"
            },
            {
                ["name"] = "Servers Cleared",
                ["value"] = "**" .. tostring(serversCleared) .. "** servers"
            },
        },
        ["footer"] = {
            ["text"] = "Made by Skuppy"
        }
    }



if webhookFrequencyCheck >= _G.config.frequencyOfReport and _G.config.webhook_url and string.lower(_G.config.webhook_url):find("discord") then
    webhookFrequencyCheck = 0
    SendMessageEMBED(_G.config.webhook_url, embed)
    update("Sent Webhook Update!")
end


function serverHop()
    local servers = {}
    local req = request({
        Url = "https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true"
    })
    local body = game:GetService("HttpService"):JSONDecode(req.Body)

    if body and body.data then
        for i, v in ipairs(body.data) do
            if type(v) == "table" and tonumber(v.playing) and tonumber(v.maxPlayers) and v.playing < v.maxPlayers and v.id ~= JobId then
                table.insert(servers, v.id)
            end
        end
    end

    if #servers > 0 then
        serversCleared = serversCleared + 1
        webhookFrequencyCheck = webhookFrequencyCheck + 1
        local newData = {
            atmsDestroyed = cash,
            uptime = uptime,
            startingMoney = moneyTotalAtStart,
            moneyEarnt = getMoney() - moneyTotalAtStart,
            serversclred = serversCleared,
            webhookfrequency = webhookFrequencyCheck
        }
        
        local json_data = game:GetService("HttpService"):JSONEncode(newData)
        writefile("farmComms.json", json_data)
        authorisedLeave = true
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, servers[math.random(1, #servers)])
    end
end


function hasTool()
    local ttr = false
    if lp.Backpack:FindFirstChild("Combat") then
        ttr = true
    else
        ttr = false
    end
    return ttr
end

function combatTool()
    if lp and lp.Character then
        if lp.Backpack:FindFirstChild("Combat") then
            lp.Backpack.Combat.Parent = char
        end
    end
end

function doOther()
if _G.config.alljobs then
    local char = game.Players.LocalPlayer.Character
    for _,v in pairs(workspace.Ignored.Drop:GetChildren()) do	
        if v:FindFirstChild("ClickDetector") and v.Name == "MeshPart" and not (doingsomething) then

        repeat
        fireclickdetector(game.Workspace.Ignored["Clean the shoes on the floor and come to me for cash"].ClickDetector)
        char.HumanoidRootPart.CFrame = CFrame.new(v.Position + Vector3.new(0,3,0))
        fireclickdetector(v.ClickDetector)
        wait()
        until not (v) or not (v:FindFirstChild("ClickDetector"))


    end
    end

    local bottle = nil
    local patient = nil
    local hospital = workspace.Ignored.HospitalJob

    for _,v in pairs(workspace.Ignored.HospitalJob:GetChildren()) do
        if v:IsA("Model") then
            patient = v
            if string.lower(v.Name):find("red") then
                bottle = "red"
            elseif string.lower(v.Name):find("green") then
                bottle = "green"
            elseif string.lower(v.Name):find("blue") then
                bottle = "blue"
            end
        end
    end
    if patient then
        char.HumanoidRootPart.CFrame = patient.HumanoidRootPart.CFrame
    end
    print(bottle)
    if bottle == "red" then
        repeat
        fireclickdetector(hospital.Red.ClickDetector)
        fireclickdetector(patient.ClickDetector)
        wait()
        until not string.lower(patient.Name):find(bottle) or not patient or not patient:FindFirstChild("ClickDetector")
        bottle = nil
        patient = nil
    elseif bottle == "green" then
        repeat
            fireclickdetector(hospital.Green.ClickDetector)
            fireclickdetector(patient.ClickDetector)
            wait()
            until not string.lower(patient.Name):find(bottle) or not patient or not patient:FindFirstChild("ClickDetector")
            bottle = nil
            patient = nil
        elseif bottle == "blue" then
            repeat
                fireclickdetector(hospital.Blue.ClickDetector)
                fireclickdetector(patient.ClickDetector)
                wait()
                until not string.lower(patient.Name):find(bottle) or not patient or not patient:FindFirstChild("ClickDetector")
                bottle = nil
                patient = nil
    end

    end
end


function slowPickup()
    for _, v in pairs(workspace.Ignored.Drop:GetChildren()) do
        if v.Name == "MoneyDrop" then
            local mag = (v.Position - char.HumanoidRootPart.Position).magnitude
            if mag < 35 and v:FindFirstChild("ClickDetector") then
                repeat
                    if v and v:FindFirstChild("ClickDetector") then
                        char.HumanoidRootPart.CFrame = CFrame.new(v.Position + Vector3.new(0,3,0))
                        
                        fireclickdetector(v.ClickDetector)
                    end
                    wait()
                until not v or not v:FindFirstChild("ClickDetector")
            end
        end
    end
    doingsomething = false
end

function tpPickup()
    for _, v in pairs(workspace.Ignored.Drop:GetChildren()) do
        if v.Name == "MoneyDrop" then
            local mag = (v.Position - char.HumanoidRootPart.Position).magnitude
            if mag < 35 and v:FindFirstChild("ClickDetector") then
                repeat
                    if v and v:FindFirstChild("ClickDetector") then
                        char.HumanoidRootPart.CFrame = CFrame.new(v.Position + Vector3.new(0,3,0))
                    end
                    wait()
                until not v or not v:FindFirstChild("ClickDetector")
            end
        end
    end
end


function act()
    char.Combat:Activate()
end

game:GetService("LogService").MessageOut:Connect(function(msg)
	if string.lower(msg):find("kick") then
        serverHop()
    elseif string.lower(msg):find("gamefull") then
        update("Error : Game Full, Trying again..")
        wait(1)
        serverHop()
    end
end)

if _G.config.hidename then
    update("Buying mask")
    repeat
        if char and char:FindFirstChild("HumanoidRootPart") then
    char:WaitForChild("HumanoidRootPart").CFrame = CFrame.new(workspace.Ignored.Shop["[Surgeon Mask] - $27"].Head.Position + Vector3.new(0,3,0))
    fireclickdetector(workspace.Ignored.Shop["[Surgeon Mask] - $27"].ClickDetector)
        end
    wait()
    until lp.Backpack:FindFirstChild("[Mask]")
    lp.Backpack:FindFirstChild("[Mask]").Parent = char
    char:FindFirstChild("[Mask]"):Activate()
    char:FindFirstChild("[Mask]").Parent = lp.Backpack
    update("Bought mask")
end

if _G.config.fastmode then
local fastCor = coroutine.create(function()

while true do
    char.Humanoid.Sit = false
    for _, v in pairs(workspace.Ignored.Drop:GetChildren()) do
        if v.Name == "MoneyDrop" then
            local mag = (v.Position - char.HumanoidRootPart.Position).magnitude
            if mag < 15 and v:FindFirstChild("ClickDetector") then
                    if v and v:FindFirstChild("ClickDetector") then
                        fireclickdetector(v.ClickDetector)
                    end
                
            end
        end
    end
wait()
end

end)

coroutine.resume(fastCor)
end

repeat 
    wait()
until not (char:FindFirstChild("ForceField")) and not (char:FindFirstChild("ForceField_TESTING"))

update("Game Loaded!")
part.CanCollide = true
------------------------------------------------


update("Setting FPS Cap")
setfflag('TaskSchedulerTargetFps', _G.config.fpscap)

if _G.config.alljobs then
    update("Running through all quick jobs")
    doOther()
end
-------------------------------------------------------------
update("Beginning Farm")
local forgiveness = false

for _, cashReg in pairs(workspace.Cashiers:GetChildren()) do
    if cashReg.Humanoid.Health > 0 then

        cash = cash + 1
        repeat
            update("Destroying ATM/Cash Reg "..tostring(cash))
            combatTool()
            act()
            char.HumanoidRootPart.CFrame = CFrame.new(cashReg.Open.Position - Vector3.new(0, 30, 0))
            part.CanCollide = true
            part.Transparency = 0
            on = true
            doingsomething = true
            repeat
                char.HumanoidRootPart.CFrame = CFrame.new(cashReg.Open.Position - Vector3.new(0, 30, 0))
                wait()
                if timer >= 6 then
                    if not forgiveness then
                    forgiveness = true
                    combatTool()
                    act()
                else
                    forgiveness = false
                    on = false
                    break
                    end
                end
            until char:FindFirstChild("Highlight")
            on = false
            repeat
                if cashReg.Head.Position == Vector3.new(-626.9984741210938,24.90001678466797,-285.0621643066406) then -- far right
                    char.HumanoidRootPart.CFrame = CFrame.new(-629, 23, -281)
                elseif cashReg.Head.Position == Vector3.new(-623.9984741210938, 24.90001678466797, -285.0622253417969) then -- far left
                    char.HumanoidRootPart.CFrame = CFrame.new(-623, 23, -281)
                else
                char.HumanoidRootPart.CFrame = CFrame.new(cashReg.Open.Position) - char.HumanoidRootPart.CFrame.LookVector*3
                local targetPosition = cashReg.Head.Position
                local currentPosition = char.HumanoidRootPart.Position
                targetPosition = Vector3.new(targetPosition.X, currentPosition.Y, targetPosition.Z)
                char.HumanoidRootPart.CFrame = CFrame.new(currentPosition, targetPosition)
                end
                wait()
            until char.BodyEffects.Attacking.Value == false
            on = false
            runs = runs + 1 
            if runs > 2 then
                runs = 0
                slowPickup()
                break
            end
        until cashReg.Humanoid.Health <= 0
        runs = 0
        char.HumanoidRootPart.CFrame = CFrame.new(cashReg.Open.Position + Vector3.new(0,15,0))
        
        update("Collecting Dropped Money")
        if _G.config.fastmode then
            tpPickup()
            tpPickup()
        else
        slowPickup()
        slowPickup()
        end
        combatTool()
        act()
        doOther()
    end
end

update("Farm Complete : Serverhopping")
serverHop()


-- pcalls, hwid check, alreadylaoded check end statements below

end
end



--end)
